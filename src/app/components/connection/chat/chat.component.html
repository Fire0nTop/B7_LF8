<div class="chat-container">
  <!-- Connection Section -->
  <div class="connection-section">
    <h3>Your Peer ID: {{ peerService.peerId() }}</h3>
    <div class="connection-controls">
      <input
        [formControl]="peerIdInput"
        placeholder="Enter peer ID to connect"
        class="peer-id-input"
      >
      <button
        (click)="connect()"
        [disabled]="!peerIdInput.value || peerService.isConnected()"
        class="connect-button"
      >
        {{ peerService.isConnected() ? 'Connected' : 'Connect' }}
      </button>
    </div>
    <div *ngIf="peerService.connectionError()" class="error-message">
      Error: {{ peerService.connectionError() }}
    </div>
  </div>

  <!-- Chat Section -->
  <div class="chat-section" *ngIf="peerService.isConnected()">
    <div class="message-container">
      <div
        *ngFor="let message of messages"
        [class.local-message]="message.isLocal"
        class="message"
      >
        <div class="message-header">
          {{ message.isLocal ? 'You' : 'Peer' }} -
          {{ message.timestamp | date:'shortTime' }}
        </div>
        <div class="message-text">{{ message.text }}</div>
      </div>
    </div>

    <div class="message-input">
      <input
        [formControl]="messageInput"
        placeholder="Type a message..."
        (keyup.enter)="sendMessage()"
      >
      <button
        (click)="sendMessage()"
        [disabled]="!messageInput.value"
      >
        Send
      </button>
    </div>
  </div>
</div>
